/*
* Minimal but feature-rich test for <time.h> usage.
* Intended as a parser/unit-test sample, not a correctness benchmark.
*
* Generated by ChatGPT 5.1
*/
#include <stdio.h>
#include <time.h>
static void print_current_time() {
   time_t now = time(((void *) 0));
   /*time_t + time()*/
   if(now == (time_t) -1) {
      puts("time() failed");

      return;
   }
   struct tm *local = localtime(&now);
   /*struct tm + localtime()*/
   if(local == ((void *) 0)) {
      puts("localtime() failed");

      return;
   }
   struct tm copy = *local;
   /*Copy struct tm value*/
   char buf[64];
   /*strftime() usage*/
   if(strftime(buf, sizeof((buf)), "%Y-%m-%d %H:%M:%S", &copy) == 0) {
      puts("strftime() produced empty string");
   }
   else {
      printf("Local time: %s\n", buf);
   }
   /*Round-trip with mktime()*/
   time_t round_trip = mktime(&copy);
   /*mktime()*/
   if(round_trip != (time_t) -1) {
      double diff = difftime(round_trip, now);
      /*difftime()*/
      printf("Round-trip diff (seconds): %.0f\n", diff);
   }
}
static void measure_cpu_time() {
   /*clock() + CLOCKS_PER_SEC*/
   clock_t start = clock();
   if(start == (clock_t) -1) {
      puts("clock() not supported");

      return;
   }
   /*Busy loop to burn some CPU cycles*/
   unsigned long volatile dummy = 0;
   for(unsigned long i = 0; i < 1000000UL; ++i) {
      dummy += i;
   }
   clock_t end = clock();
   if(end == (clock_t) -1) {
      puts("clock() failed on end");

      return;
   }
   clock_t delta = end - start;
   double seconds = (double) delta / (double) ((__clock_t) 1000000);
   printf("CPU time used: %.6f seconds (dummy=%lu)\n", seconds, dummy);
}
int main() {
   puts("=== <time.h> parser test ===");
   print_current_time();
   measure_cpu_time();
   /*Another basic use of time() + difftime() to ensure multiple calls*/
   time_t t1 = time(((void *) 0));
   /*Simulated delay loop*/
   for(int volatile i = 0; i < 10000000; ++i) {
      /*no-op*/
   }
   time_t t2 = time(((void *) 0));
   if(t1 != (time_t) -1 && t2 != (time_t) -1) {
      double elapsed = difftime(t2, t1);
      printf("Wall-clock elapsed (seconds): %.0f\n", elapsed);
   }
   puts("=== end of test ===");

   return 0;
}